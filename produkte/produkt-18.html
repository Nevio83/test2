<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Electronic Clock Digitale Uhr - Maios</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="elektronik.css" rel="stylesheet">
    <style>
        .success-animation {
            animation: success-animation 0.8s ease-in-out;
        }
        .cart-icon-pulse {
            animation: cart-icon-pulse 0.5s ease-in-out;
        }
        .cart-rainbow-bounce {
            animation: cart-rainbow-bounce 0.8s ease-in-out;
        }
        .heart-pulse {
            animation: heart-pulse 0.5s ease-in-out;
        }
        @keyframes success-animation {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        @keyframes cart-icon-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        @keyframes cart-rainbow-bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes heart-pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        /* Farbauswahl Styles */
        .color-selection {
            margin: 1rem 0;
        }
        .color-selection h5 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #fff;
        }
        .color-options {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }
        .color-option {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid transparent;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .color-option:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }
        .color-option.selected {
            border-color: #4CAF50;
            box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.3);
        }
        .color-option.selected::after {
            content: '\2713';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }
        .color-name {
            margin-top: 0.5rem;
            font-size: 0.95rem;
            color: #ddd;
        }
        .selected-color-info {
            margin-top: 1rem;
            padding: 0.75rem;
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            color: #fff;
        }

        /* ============================================
           LIQUID GLASS BUNDLE DESIGN - ELEKTRONIK
           ============================================ */
        .bundle-box,
        .bundle-container {
            position: relative;
            padding: 2.5rem;
            border-radius: 28px;
            overflow: hidden;
            margin: 2rem 0;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 
                0 8px 32px 0 rgba(31, 38, 135, 0.2),
                inset 0 1px 0 0 rgba(255, 255, 255, 0.25);
        }

        .bundle-box::before,
        .bundle-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -1;
            opacity: 0.95;
            background: linear-gradient(135deg, 
                #667eea 0%, 
                #764ba2 25%, 
                #5b86e5 50%, 
                #36d1dc 75%, 
                #667eea 100%
            );
            animation: gradientShift 10s ease infinite;
            background-size: 200% 200%;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .bundle-box::after,
        .bundle-container::after {
            content: '';
            position: absolute;
            font-size: 4rem;
            top: 20px;
            right: 30px;
            opacity: 0.15;
            pointer-events: none;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .bundle-header,
        .bundle-title {
            font-size: 2rem;
            font-weight: 900;
            text-align: center;
            margin-bottom: 2rem;
            color: #ffffff;
            text-transform: uppercase;
            letter-spacing: 4px;
            text-shadow: 
                0 2px 15px rgba(0, 0, 0, 0.4),
                0 0 30px rgba(255, 255, 255, 0.3);
            position: relative;
            z-index: 1;
        }

        .bundle-card {
            position: relative;
            padding: 1.8rem;
            margin-bottom: 1.2rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.25);
        }

        .bundle-card:hover {
            transform: translateY(-6px) scale(1.02);
            background: rgba(255, 255, 255, 0.22);
            border: 1px solid rgba(255, 255, 255, 0.35);
            box-shadow: 
                0 12px 35px rgba(0, 0, 0, 0.25),
                inset 0 1px 0 rgba(255, 255, 255, 0.4),
                0 0 25px rgba(255, 255, 255, 0.15);
        }

        .bundle-card.selected {
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.6);
            box-shadow: 
                0 12px 40px rgba(0, 0, 0, 0.3),
                inset 0 2px 0 rgba(255, 255, 255, 0.5),
                0 0 40px rgba(255, 255, 255, 0.4);
            transform: scale(1.04);
        }

        .bundle-card.selected::before {
            content: '\2713';
            position: absolute;
            top: 15px;
            right: 15px;
            width: 35px;
            height: 35px;
            background: rgba(255, 255, 255, 0.95);
            color: #667eea;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.3rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .bundle-radio {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }

        .bundle-info {
            position: relative;
            z-index: 1;
        }

        .bundle-title {
            font-size: 1.4rem;
            font-weight: 800;
            color: #ffffff;
            margin-bottom: 0.8rem;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 0.8rem;
            flex-wrap: wrap;
        }

        .bundle-badge { display: none !important; }

        .bundle-label { display: none !important; }

        .bundle-prices {
            font-size: 1.5rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .bundle-prices .savings {
            display: block;
            font-size: 1rem;
            color: #a8edea;
            font-weight: 600;
            margin-top: 0.3rem;
            text-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
        }

        .bundle-total {
            margin-top: 0.8rem;
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.95);
            text-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
        }

        .bundle-add-btn {
            width: 100%;
            padding: 1.2rem;
            margin-top: 1.5rem;
            font-size: 1.2rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
            border: none;
            border-radius: 16px;
            background: rgba(255, 255, 255, 0.95);
            color: #667eea;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 
                0 6px 25px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 1);
        }

        .bundle-add-btn:hover {
            transform: translateY(-3px);
            background: #ffffff;
            box-shadow: 
                0 10px 35px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 1);
        }

        @media (max-width: 768px) {
            .bundle-box,
            .bundle-container {
                padding: 1.5rem;
                border-radius: 20px;
            }
            .bundle-header,
            .bundle-title {
                font-size: 1.5rem;
                letter-spacing: 2px;
            }
            .bundle-card {
                padding: 1.2rem;
            }
            .bundle-title {
                font-size: 1.1rem;
            }
            .bundle-prices {
                font-size: 1.2rem;
            }
        }
    </style>
    <link rel="stylesheet" href="../product-image-fullscreen.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="../index.html">
                <i class="bi bi-shop"></i> Maios
            </a>
            <div class="navbar-nav ms-auto">
                <a href="../index.html" class="nav-link modern-nav-link">
                    <i class="bi bi-house-door-fill"></i> Startseite
                </a>
                <a href="../cart.html" class="nav-link modern-nav-link cart-nav-link">
                    <i class="bi bi-cart3-fill"></i> Warenkorb
                </a>
            </div>
        </div>
    </nav>

    <!-- Produkt Hero Section -->
    <section class="product-hero">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="display-4 fw-bold mb-3">Home Electronic Clock Digitale Uhr</h1>
                    <p class="lead mb-4">Moderne digitale Uhr mit LED-Display und Weckfunktion. Perfekt für Zuhause oder Büro mit elegantem Design.</p>
                    <div class="d-flex align-items-center gap-3 mb-4">
                        <span class="price-tag">€14.99</span>
                        <span class="text-muted text-decoration-line-through">€34.99</span>
                        <span class="badge bg-success">Kostenloser Versand in Europa</span>
                    </div>
                    
                    <!-- Farbauswahl wird hier eingefügt -->
                    
                                        <button class="btn btn-light btn-lg me-3 add-to-cart" id="cartBtn">
                        <i class="bi bi-cart-plus"></i> In den Warenkorb
                    </button>
                    <button class="btn btn-outline-light btn-lg wishlist-style-btn wishlist-button" id="wishlistBtn" data-product-id="18">
                        <i class="bi bi-heart"></i> Zur Wunschliste
                    </button>
                </div>
                <div class="col-lg-6 text-center">
                    <img src="../produkt bilder/Home Electronic Clock Digitale Uhr.jpg" alt="Home Electronic Clock Digitale Uhr" class="img-fluid product-image main-product-image" style="max-height: 400px; max-width: 400px;">
                </div>
            </div>
        </div>
    </section>

    <!-- Produkt Details -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <h2 class="mb-4">Produktbeschreibung</h2>
                    <p class="lead mb-4">Moderne digitale Uhr mit LED-Display und Weckfunktion. Perfekt für Zuhause oder Büro mit elegantem Design.</p>
                    
                    <h3>Hauptmerkmale</h3>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>LED-Display</li>
                        <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Weckfunktion</li>
                        <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Elegantes Design</li>
                        <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Einfache Bedienung</li>
                        <li class="mb-2"><i class="bi bi-check-circle-fill text-success me-2"></i>Kompakte Größe</li>
                    </ul>

                    <h3 class="mt-4">Technische Spezifikationen</h3>
                    <div class="row">
                        <div class="col-md-6">
                            <p><strong>Kategorie:</strong> Technik/Gadgets</p>
                            <p><strong>Preis:</strong> €14.99</p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Verfügbarkeit:</strong> Auf Lager</p>
                            <p><strong>Lieferzeit:</strong> 7-15 Werktage</p>
                        </div>
                    </div>

                    <p><strong>Display:</strong> LED</p>
                    <p><strong>Stromversorgung:</strong> USB oder Batterie</p>
                    <p><strong>Funktionen:</strong> Uhrzeit, Wecker, Datum</p>
                    <p><strong>Abmessungen:</strong> 12 x 8 x 4 cm</p>
                    <p><strong>Gewicht:</strong> 200 Gramm</p>

                    <!-- Bundle-Box -->
                    <div id="bundle-section" class="mt-5"></div>
                </div>
                
                <div class="col-lg-4">
                    <div class="quick-order-card d-none d-lg-block">
                        <div class="quick-order-header">
                            <h4>Schnellbestellung</h4>
                        </div>
                        <div class="quick-order-body">
                            <div class="quantity-section">
                                <label class="quantity-label">Menge:</label>
                                <div class="quantity-input-group">
                                    <button class="quantity-btn" onclick="decreaseQuantity(event)">-</button>
                                    <input type="number" class="quantity-input" id="quantity-desktop" value="1" min="1" max="999" maxlength="3">
                                    <button class="quantity-btn" onclick="increaseQuantity(event)">+</button>
                                </div>
                            </div>
                            
                            <div class="price-section">
                                <div class="current-price">€14.99</div>
                            </div>
                            
                            <div class="action-buttons">
                                <button class="buy-now-btn wishlist-style-btn" onclick="addToCartWithQuantity(event)">
                                    <i class="bi bi-cart-plus"></i> Jetzt kaufen
                                </button>
                                <button class="wishlist-btn wishlist-button" data-product-id="18">
                                    <i class="bi bi-heart"></i> Zur Wunschliste
                                </button>
                            </div>
                            
                            <div class="features-section">
                                <ul class="features-list">
                                    <li><i class="bi bi-truck"></i> Kostenloser Versand in Europa</li>
                                    <li><i class="bi bi-shield-check"></i> Garantie inklusive</li>
                                    <li><i class="bi bi-arrow-return-left"></i> 30 Tage Rückgaberecht</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Ähnliche Produkte -->
    <section class="py-5 similar-products-section">
        <div class="container">
            <div class="section-header text-center mb-5">
                <h2 class="section-title">Ähnliche Produkte</h2>
                <p class="section-subtitle">Entdecken Sie weitere Produkte, die Ihnen gefallen könnten</p>
            </div>
                        <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 g-3 g-md-4">
                <div class="col">
                    <div class="similar-product-card" onclick="window.location.href='produkt-17.html'">
                        <div class="product-image-wrapper">
                            <img src="../produkt bilder/Bluetooth Anti-Lost Finder Wassertropfen.jpg" class="product-image" alt="Bluetooth Anti-Lost Finder Wassertropfen">
                        </div>
                        <div class="product-info">
                            <h5 class="product-title">Bluetooth Anti-Lost Finder Wassertropfen</h5>
                            <div class="price-container"><span class="current-price">€14.99</span></div>
                            <div class="view-product-btn">
                                <span>Jetzt ansehen</span>
                                <i class="bi bi-arrow-right"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="similar-product-card" onclick="window.location.href='produkt-19.html'">
                        <div class="product-image-wrapper">
                            <img src="../produkt bilder/Elektronisches Distanzmessgerät Digital.jpg" class="product-image" alt="Elektronisches Distanzmessgerät Digital">
                        </div>
                        <div class="product-info">
                            <h5 class="product-title">Elektronisches Distanzmessgerät Digital</h5>
                            <div class="price-container"><span class="current-price">€39.99</span></div>
                            <div class="view-product-btn">
                                <span>Jetzt ansehen</span>
                                <i class="bi bi-arrow-right"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="similar-product-card" onclick="window.location.href='produkt-22.html'">
                        <div class="product-image-wrapper">
                            <img src="../produkt bilder/Waterproof RGB LED Solar Light.jpg" class="product-image" alt="Waterproof RGB LED Solar Light">
                        </div>
                        <div class="product-info">
                            <h5 class="product-title">Waterproof RGB LED Solar Light</h5>
                            <div class="price-container"><span class="current-price">€9.99</span></div>
                            <div class="view-product-btn">
                                <span>Jetzt ansehen</span>
                                <i class="bi bi-arrow-right"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="similar-product-card" onclick="window.location.href='produkt-21.html'">
                        <div class="product-image-wrapper">
                            <img src="../produkt bilder/LED Water Ripple Crystal.jpg" class="product-image" alt="LED Wasserwellen Kristall Tischlampe">
                        </div>
                        <div class="product-info">
                            <h5 class="product-title">LED Wasserwellen Kristall Tischlampe</h5>
                            <div class="price-container"><span class="current-price">€39.99</span></div>
                            <div class="view-product-btn">
                                <span>Jetzt ansehen</span>
                                <i class="bi bi-arrow-right"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container text-center">
            <p>&copy; 2024 Maios - Alle Rechte vorbehalten</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../app.js" defer></script>
    <script src="../cart.js"></script>
    
    <!-- Color Cart Bridge Integration -->
    <script src="../color-cart-bridge.js"></script>
    
    <script>
    // Standardized Wishlist Functions (like Produkt 24)
    function getWishlist() {
        return JSON.parse(localStorage.getItem('wishlist')) || [];
    }
    
    function setWishlist(wishlist) {
        localStorage.setItem('wishlist', JSON.stringify(wishlist));
    }
    
    function isInWishlist(id) {
        return getWishlist().some(item => Number(item.id) === Number(id));
    }
    
    function toggleWishlist(product) {
        let wishlist = getWishlist();
        if (isInWishlist(product.id)) {
            wishlist = wishlist.filter(item => Number(item.id) !== Number(product.id));
            setWishlist(wishlist);
            updateAllWishlistButtons();
            
            if (typeof showAlert === 'function') {
                showAlert('Produkt von der Wunschliste entfernt', 'wishlist.html');
            } else {
                showNotification('Produkt von der Wunschliste entfernt');
            }
        } else {
            wishlist.push({
                id: product.id,
                name: product.name,
                price: product.price,
                image: product.image,
                description: product.description
            });
            setWishlist(wishlist);
            
            // Enhanced wishlist animation only when adding
            triggerWishlistButtonAnimation(product.id);
            updateAllWishlistButtons();
            
            if (typeof showAlert === 'function') {
                showAlert('Produkt zur Wunschliste hinzugefügt', 'wishlist.html');
            } else {
                showNotification('Produkt zur Wunschliste hinzugefügt');
            }
        }
    }
    
    function updateAllWishlistButtons() {
        const isInList = isInWishlist(product.id);
        
        // Update main wishlist button
        const mainBtn = document.getElementById('wishlistBtn');
        if (mainBtn) {
            if (isInList) {
                mainBtn.classList.add('active');
                mainBtn.innerHTML = '<i class="bi bi-heart-fill"></i> Entfernen';
            } else {
                mainBtn.classList.remove('active');
                mainBtn.innerHTML = '<i class="bi bi-heart"></i> Zur Wunschliste';
            }
        }
        
        // Update all quick order wishlist buttons
        const quickOrderBtns = document.querySelectorAll('.wishlist-button');
        quickOrderBtns.forEach(btn => {
            if (isInList) {
                btn.classList.add('active');
                btn.innerHTML = '<i class="bi bi-heart-fill"></i> Entfernen';
            } else {
                btn.classList.remove('active');
                btn.innerHTML = '<i class="bi bi-heart"></i> Zur Wunschliste';
            }
        });
    }
    
    function triggerWishlistButtonAnimation(productId) {
        // Only animate the main wishlist button
        const wishlistButton = document.getElementById('wishlistBtn');
        
        if (wishlistButton) {
            wishlistButton.classList.add('success-animation');
            setTimeout(() => {
                wishlistButton.classList.remove('success-animation');
            }, 800);
            
            // Heart pulse animation
            const heartIcon = wishlistButton.querySelector('i');
            if (heartIcon) {
                heartIcon.classList.add('heart-pulse');
                setTimeout(() => {
                    heartIcon.classList.remove('heart-pulse');
                }, 800);
            }
        }
    }
    
    function showNotification(message, type = 'success') {
        const notification = document.createElement('div');
        notification.className = `alert alert-${type} position-fixed end-0 m-4 shadow-lg fade show`;
        notification.style.zIndex = '20000';
        notification.style.fontSize = '1rem';
        notification.style.minWidth = '160px';
        notification.style.maxWidth = '320px';
        notification.style.padding = '0.75rem 2rem';
        notification.style.textAlign = 'center';
        notification.style.borderRadius = '2rem';
        notification.style.boxShadow = '0 8px 32px rgba(0,0,0,0.18)';
        notification.style.background = type === 'success' 
            ? 'linear-gradient(90deg, #4f8cff 0%, #38c6ff 100%)' 
            : 'linear-gradient(90deg, #ff6b6b 0%, #ee5a24 100%)';
        notification.style.color = '#fff';
        notification.style.fontWeight = '500';
        notification.style.letterSpacing = '0.02em';
        notification.style.pointerEvents = 'auto';
        notification.style.position = 'fixed';
        notification.style.right = '2.5rem';
        notification.style.top = 'calc(56px + 1.2rem)';
        notification.style.cursor = 'pointer';
        notification.textContent = message;
        
        // Klick-Event hinzufügen
        notification.addEventListener('click', function() {
            notification.classList.remove('show');
            notification.classList.add('fade');
            setTimeout(() => notification.remove(), 400);
            // Zur Wishlist-Seite weiterleiten (aus dem produkte/ Ordner)
            window.location.href = '../wishlist.html';
        });
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            if (document.body.contains(notification)) {
                notification.classList.remove('show');
                notification.classList.add('fade');
                setTimeout(() => notification.remove(), 400);
            }
        }, 2000);
    }

    // Produktdaten für diese Seite mit Farbauswahl
    const product = {
        id: 18,
        name: "Home Electronic Clock Digitale Uhr",
        price: 14.99,
        originalPrice: 34.99,
        image: "produkt bilder/Home Electronic Clock Digitale Uhr.jpg",
        category: "Technik/Gadgets",
        description: "Moderne digitale Uhr mit LED-Display und Weckfunktion. Perfekt für Zuhause oder Büro mit elegantem Design.",
        sku: "CLOCK018",
        inStock: true,
        shippingTime: "7-15 Werktage",
        tags: ["uhr", "digital", "led", "wecker"],
        colors: [
            {
                name: "Schwarz",
                code: "#000000",
                price: 24.99,
                originalPrice: 34.99,
                sku: "CJCL18001BK"
            },
            {
                name: "Weiß",
                code: "#FFFFFF",
                price: 24.99,
                originalPrice: 34.99,
                sku: "CJCL18002WH"
            }
        ]
    };

    // ColorSelection Klasse - EXAKT wie Produkt 11
    class ColorSelection {
        constructor() {
            this.selectedColor = null;
            this.productId = 18;
            this.productData = null;
            this.init();
        }

        async init() {
            console.log('ColorSelection: Initialisierung gestartet für Produkt 18');
            
            // Load product data
            await this.loadProductData();
            
            // Create color selection UI
            this.createColorSelection();
            
            // Set default color
            if (this.productData && this.productData.colors && this.productData.colors.length > 0) {
                this.selectColor(this.productData.colors[0]);
            }
        }

        async loadProductData() {
            try {
                const response = await fetch('../products.json');
                const products = await response.json();
                this.productData = products.find(p => p.id === this.productId);
                
                // Fallback to local product data if not found in JSON
                if (!this.productData) {
                    this.productData = product;
                }
                
                console.log('ColorSelection: Produktdaten geladen', this.productData);
            } catch (error) {
                console.error('ColorSelection: Fehler beim Laden der Produktdaten', error);
                // Use local product data as fallback
                this.productData = product;
            }
        }

        createColorSelection() {
            if (!this.productData || !this.productData.colors || this.productData.colors.length === 0) {
                console.log('ColorSelection: Keine Farben verfügbar');
                return;
            }

            // Find the price container
            const priceContainer = document.querySelector('.d-flex.align-items-center.gap-3.mb-4');
            if (!priceContainer) {
                console.error('ColorSelection: Preis-Container nicht gefunden');
                return;
            }

            // Create color selection container
            const container = document.createElement('div');
            container.className = 'color-selection mb-4';
            container.id = 'colorSelection';
            
            container.innerHTML = `
                <h5 class="mb-3">Farbe wählen:</h5>
                <div class="color-options">
                    ${this.productData.colors.map((color, index) => `
                        <div class="color-option" 
                             data-color-index="${index}"
                             style="background-color: ${color.code};"
                             title="${color.name}">
                        </div>
                    `).join('')}
                </div>
                <div class="selected-color-info">
                    Ausgewählt: <span id="selectedColorName">Schwarz</span> - <span id="selectedColorPrice">€14.99</span>
                </div>
            `;
            
            // Insert after price container
            priceContainer.parentNode.insertBefore(container, priceContainer.nextSibling);
            
            // Add event listeners
            container.querySelectorAll('.color-option').forEach((option, index) => {
                option.addEventListener('click', () => {
                    this.selectColor(this.productData.colors[index]);
                });
                
                option.addEventListener('mouseenter', () => {
                    if (!option.classList.contains('selected')) {
                        option.style.transform = 'scale(1.1)';
                    }
                });
                
                option.addEventListener('mouseleave', () => {
                    if (!option.classList.contains('selected')) {
                        option.style.transform = 'scale(1)';
                    }
                });
            });
            
            console.log('ColorSelection: UI erstellt');
        }

        selectColor(color) {
            if (!color) return;
            
            this.selectedColor = color;
            console.log('ColorSelection: Farbe ausgewählt', color);
            
            // Update UI
            const container = document.getElementById('colorSelection');
            if (!container) return;
            
            // Update selected state
            container.querySelectorAll('.color-option').forEach((option, index) => {
                if (this.productData.colors[index].name === color.name) {
                    option.classList.add('selected');
                    option.style.transform = 'scale(1.1)';
                } else {
                    option.classList.remove('selected');
                    option.style.transform = 'scale(1)';
                }
            });
            
            // Update color info
            const colorNameElement = document.getElementById('selectedColorName');
            const colorPriceElement = document.getElementById('selectedColorPrice');
            if (colorNameElement) {
                colorNameElement.textContent = color.name;
            }
            if (colorPriceElement) {
                colorPriceElement.textContent = `€${color.price.toFixed(2)}`;
            }
            
            // Update main price
            this.updatePrice(color);
            
            // Update global function for cart integration
            window.getSelectedColor = () => this.selectedColor;
        }

        updatePrice(color) {
            if (!color) return;
            
            // Update main price
            const priceElement = document.querySelector('.price-tag');
            if (priceElement) {
                priceElement.textContent = `€${color.price.toFixed(2)}`;
            }
            
            // Update original price
            const originalPriceElement = document.querySelector('.text-muted.text-decoration-line-through');
            if (originalPriceElement) {
                originalPriceElement.textContent = `€${color.originalPrice.toFixed(2)}`;
            }
            
            console.log('ColorSelection: Preis aktualisiert', color.price);
        }
    }

    // Bundles dynamisch laden wie bei Produkt 19
    fetch('../products.json')
      .then(res => res.json())
      .then(products => {
        const prod = products.find(p => p.id === product.id);
        if (prod && prod.bundles && prod.bundles.length > 0) {
          renderBundles(prod.bundles);
        }
      });

    function renderBundles() {
      // Preisstaffel: [ {menge, preisProSet, originalProSet} ]
      const staffel = [
        {qty: 1, price: product.price, original: product.price},
        {qty: 2, price: product.price * 0.85, original: product.price},
        {qty: 3, price: product.price * 0.80, original: product.price}
      ];
      const section = document.getElementById('bundle-section');
      if (!section) return;
      
      let selected = 1; // Standard: 2 Sets
      section.innerHTML = `
        <div class="bundle-box">
          <div class="bundle-header">BUNDLE & SPARE</div>
          <form id="bundleForm">
            ${staffel.map((s, i) => `
              <div class="bundle-card${i===selected?' selected':''}" data-index="${i}">
                <input type="radio" name="bundle" class="bundle-radio" id="bundleRadio${i}" value="${i}" ${i===selected?'checked':''}>
                <div class="bundle-info">
                  <div class="bundle-title">
                    ${s.qty} Set${s.qty>1?'s':''} kaufen                  </div>
                  <div class="bundle-prices">
                    €${s.price.toFixed(2)} pro Set
                    <span class="savings">Spare €${((s.original-s.price)*s.qty).toFixed(2)}</span>
                  </div>
                  ${s.qty>1?`<div style='margin-top:.7em;font-size:.97rem;'>Gesamt: <b>€${(s.price*s.qty).toFixed(2)}</b></div>`:''}
                </div>
              </div>
            `).join('')}
            <button type="submit" class="btn bundle-add-btn wishlist-style-btn" onclick="addBundleAndRedirect(event)">In den Warenkorb</button>
          </form>
        </div>
      `;
      // Interaktive Auswahl
      const cards = section.querySelectorAll('.bundle-card');
      const radios = section.querySelectorAll('.bundle-radio');
      
      // Event-Listener für Radio-Buttons
      radios.forEach((radio, i) => {
        radio.addEventListener('change', () => {
          cards.forEach(c => c.classList.remove('selected'));
          cards[i].classList.add('selected');
        });
      });

      // Event-Listener für Bundle-Cards
      cards.forEach((card, i) => {
        card.addEventListener('click', (e) => {
          // Verhindere Bubbling wenn auf Radio geklickt wurde
          if (e.target === radios[i]) return;
          
          // Wähle Radio-Button aus
          radios[i].checked = true;
          
          // Aktualisiere Selected-Status
          cards.forEach(c => c.classList.remove('selected'));
          card.classList.add('selected');
          
          // Trigger change Event auf Radio
          radios[i].dispatchEvent(new Event('change'));
        });
      });
    }

    function getCart() {
      return JSON.parse(localStorage.getItem('cart')) || [];
    }
    
    function setCart(cart) {
      localStorage.setItem('cart', JSON.stringify(cart));
    }

    function triggerNavCartAnimation() {
      const navCartButton = document.querySelector('.cart-nav-link');
      if (navCartButton) {
          navCartButton.classList.add('cart-rainbow-bounce');
          setTimeout(() => {
              navCartButton.classList.remove('cart-rainbow-bounce');
          }, 800);
      }
    }

    function triggerBundleButtonAnimation(button) {
      if (button) {
          button.classList.add('add-to-cart', 'success-animation');
          setTimeout(() => {
              button.classList.remove('success-animation');
          }, 800);
          
          const buttonIcon = button.querySelector('i');
          if (buttonIcon) {
              buttonIcon.classList.add('cart-icon-pulse');
              setTimeout(() => {
                  buttonIcon.classList.remove('cart-icon-pulse');
              }, 500);
          }
      }
    }

    function showAlert(message, redirectTo = 'cart.html') {
      const alert = document.createElement('div');
      alert.className = 'alert alert-success position-fixed end-0 m-4 shadow-lg fade show';
      alert.style.zIndex = '20000';
      alert.style.fontSize = '1rem';
      alert.style.minWidth = '160px';
      alert.style.maxWidth = '320px';
      alert.style.padding = '0.75rem 2rem';
      alert.style.textAlign = 'center';
      alert.style.borderRadius = '2rem';
      alert.style.boxShadow = '0 8px 32px rgba(0,0,0,0.18)';
      alert.style.background = 'linear-gradient(90deg, #4f8cff 0%, #38c6ff 100%)';
      alert.style.color = '#fff';
      alert.style.fontWeight = '500';
      alert.style.letterSpacing = '0.02em';
      alert.style.pointerEvents = 'auto';
      alert.style.position = 'fixed';
      alert.style.right = '2.5rem';
      alert.style.top = 'calc(56px + 1.2rem)';
      alert.style.cursor = 'pointer';
      alert.textContent = message;
      alert.addEventListener('click', () => {
        window.location.href = '../' + redirectTo;
      });
      document.body.appendChild(alert);
      setTimeout(() => {
        if (document.body.contains(alert)) {
          alert.classList.remove('show');
          alert.classList.add('fade');
          setTimeout(() => alert.remove(), 400);
        }
      }, 1700);
    }

    function showNotification(message, type = 'success') {
      const notification = document.createElement('div');
      notification.className = `alert alert-${type} position-fixed end-0 m-4 shadow-lg fade show`;
      notification.style.zIndex = '20000';
      notification.style.fontSize = '1rem';
      notification.style.minWidth = '160px';
      notification.style.maxWidth = '320px';
      notification.style.padding = '0.75rem 2rem';
      notification.style.textAlign = 'center';
      notification.style.borderRadius = '2rem';
      notification.style.boxShadow = '0 8px 32px rgba(0,0,0,0.18)';
      notification.style.background = type === 'success' 
        ? 'linear-gradient(90deg, #4f8cff 0%, #38c6ff 100%)' 
        : 'linear-gradient(90deg, #ff6b6b 0%, #ee5a24 100%)';
      notification.style.color = '#fff';
      notification.style.fontWeight = '500';
      notification.style.letterSpacing = '0.02em';
      notification.style.pointerEvents = 'auto';
      notification.style.position = 'fixed';
      notification.style.right = '2.5rem';
      notification.style.top = 'calc(56px + 1.2rem)';
      notification.style.cursor = 'pointer';
      notification.textContent = message;
      
      notification.addEventListener('click', function() {
        notification.classList.remove('show');
        notification.classList.add('fade');
        setTimeout(() => notification.remove(), 400);
      });
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        if (document.body.contains(notification)) {
          notification.classList.remove('show');
          notification.classList.add('fade');
          setTimeout(() => notification.remove(), 400);
        }
      }, 2000);
    }

    function addBundleToCart(bundle) {
      let cart = getCart();
      // Bundle als eigenes Cart-Item mit bundleId
      const bundleId = bundle.bundleId;
      const existing = cart.find(item => item.bundleId === bundleId);
      if (existing) {
        // Erhöhe die Menge bei wiederholtem Hinzufügen
        existing.quantity++;
      } else {
        cart.push({
          id: product.id,
          name: bundle.name,
          price: bundle.price,
          image: product.image,
          description: bundle.description,
          bundleId: bundleId,
          bundleItems: [],
          quantity: 1
        });
      }
      setCart(cart);
    }

    function addBundleAndRedirect(event) {
      event.preventDefault();
      const form = event.target.closest('form');
      const selectedRadio = form.querySelector('input[name="bundle"]:checked');
      if (!selectedRadio) return;
      
      const idx = parseInt(selectedRadio.value);
      const staffel = [
        {qty: 1, price: product.price, original: product.price},
        {qty: 2, price: product.price * 0.85, original: product.price},
        {qty: 3, price: product.price * 0.80, original: product.price}
      ];
      const s = staffel[idx];
      
      addBundleToCart({
        id: product.id,
        name: product.name + ` (${s.qty} Set${s.qty>1?'s':''})`,
        price: s.price * s.qty,
        image: product.image,
        description: product.description + ` (Bundle: ${s.qty} Set${s.qty>1?'s':''})`,
        bundleId: `${product.id}-qty${s.qty}`,
        quantity: 1
      });
      
      // Enhanced animations for bundle
      triggerBundleButtonAnimation(event.target);
      triggerNavCartAnimation();
      
      // Popup anzeigen statt direkter Weiterleitung
      if (typeof showAlert === 'function') {
        showAlert('Bundle zum Warenkorb hinzugefügt', 'cart.html');
      } else {
        showNotification('Bundle zum Warenkorb hinzugefügt');
      }
    }

    // Event listeners for buttons
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize ColorSelection
        console.log('Initialisiere ColorSelection für Produkt 18');
        window.colorSelection = new ColorSelection();
        
        // Initialize bundles
        renderBundles();
        
        // Event-Listener für Hero-Buttons
        const cartBtn = document.getElementById('cartBtn');
        const wishlistBtn = document.getElementById('wishlistBtn');
        
        if (cartBtn) {
            cartBtn.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Get selected color
                let selectedColor = null;
                if (window.getSelectedColor && typeof window.getSelectedColor === 'function') {
                    selectedColor = window.getSelectedColor();
                } else if (window.colorSelection && window.colorSelection.selectedColor) {
                    selectedColor = window.colorSelection.selectedColor;
                } else {
                    selectedColor = { 
                        name: 'Schwarz', 
                        price: 24.99, 
                        originalPrice: 34.99,
                        sku: 'CJCL18001BK'
                    };
                }
                
                console.log('Adding to cart with color:', selectedColor);
                
                // Use the addToCart function from app.js
                if (typeof addToCart === 'function') {
                    addToCart({
                        id: 18,
                        name: 'Home Electronic Clock Digitale Uhr',
                        price: selectedColor.price,
                        originalPrice: selectedColor.originalPrice,
                        image: 'produkt bilder/Home Electronic Clock Digitale Uhr.jpg',
                        category: 'Technik/Gadgets',
                        selectedColor: selectedColor
                    });
                } else {
                    // Fallback implementation
                    const cartItem = {
                        id: 18,
                        name: `Home Electronic Clock Digitale Uhr (${selectedColor.name})`,
                        price: selectedColor.price,
                        originalPrice: selectedColor.originalPrice,
                        image: 'produkt bilder/Home Electronic Clock Digitale Uhr.jpg',
                        quantity: 1,
                        color: selectedColor.name,
                        sku: selectedColor.sku
                    };
                    
                    let cart = JSON.parse(localStorage.getItem('cart') || '[]');
                    const existingIndex = cart.findIndex(item => 
                        item.id === 18 && 
                        item.color === selectedColor.name &&
                        !item.isBundle
                    );
                    
                    if (existingIndex >= 0) {
                        cart[existingIndex].quantity++;
                    } else {
                        cart.push(cartItem);
                    }
                    
                    localStorage.setItem('cart', JSON.stringify(cart));
                    
                    // Show notification
                    if (typeof showAlert === 'function') {
                        showAlert('Produkt wurde zum Warenkorb hinzugefügt!', 'cart.html');
                    } else {
                        alert('Produkt wurde zum Warenkorb hinzugefügt!');
                        setTimeout(() => {
                            window.location.href = '../cart.html';
                        }, 1000);
                    }
                }
            });
        }
        
        // Standardized wishlist implementation like Produkt 24
        const allWishlistButtons = document.querySelectorAll('.wishlist-button');
        allWishlistButtons.forEach(button => {
            button.addEventListener('click', function(e) {
                e.preventDefault();
                toggleWishlist(product);
            });
        });
        
        // Update all wishlist buttons on page load
        updateAllWishlistButtons();
    });
    </script>
    
    <script src="../keyboard-shortcuts.js"></script>
    
<script>
// Fullscreen-Funktionalität
const mainImg = document.querySelector('.main-product-image');
if (mainImg) {
    mainImg.style.cursor = 'zoom-in';
    mainImg.onclick = () => {
        const modal = document.createElement('div');
        modal.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);z-index:10000;display:flex;align-items:center;justify-content:center;cursor:zoom-out';
        const img = document.createElement('img');
        img.src = mainImg.src; img.style.cssText = 'max-width:90%;max-height:90%;object-fit:contain;border-radius:8px';
        const close = document.createElement('span');
        close.innerHTML = '&times;'; close.style.cssText = 'position:absolute;top:20px;right:30px;color:white;font-size:40px;cursor:pointer';
        modal.append(img, close); document.body.appendChild(modal); document.body.style.overflow = 'hidden';
        const closeModal = () => { document.body.removeChild(modal); document.body.style.overflow = 'auto'; };
        modal.onclick = closeModal; close.onclick = closeModal;
        document.addEventListener('keydown', e => e.key === 'Escape' && closeModal());
    };
}
</script>
</body>
</html>
