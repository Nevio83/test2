<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warenkorb - Marktplatz</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <link href="cart.css" rel="stylesheet">
    <link href="color-image-selection.css" rel="stylesheet">
    <script src="https://js.stripe.com/v3/"></script>
    <style>
        /* Verstecke ALLE Farbkreise in cart.html */
        .color-circle,
        .color-option:not(.cart-color-option),
        div[style*="border-radius: 50%"][style*="background"],
        div[style*="border-radius: 50%"][style*="background-color"],
        .color-options:not(.cart-color-options) .color-option,
        div[onclick*="selectColor"],
        div[class*="color"][style*="width: 30px"],
        div[class*="color"][style*="height: 30px"],
        .cart-item-details > div[style*="background-color"],
        .cart-item-details > div[style*="border-radius"],
        [style*="width: 30px"][style*="height: 30px"][style*="border-radius"],
        [style*="width: 25px"][style*="height: 25px"][style*="border-radius"] {
            display: none !important;
        }
        
        /* Zeige nur Bild-basierte Farbauswahl */
        .cart-item-color-selection {
            display: flex !important;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">
                <i class="bi bi-shop" aria-hidden="true"></i> Marktplatz
            </a>
            <a href="index.html" class="btn btn-outline-primary">
                <i class="bi bi-arrow-left" aria-hidden="true"></i> Zurück zum Shop
            </a>
        </div>
    </nav>

    <div class="main-container">
        <div class="page-header">
            <h1 class="page-title">
                <i class="bi bi-cart3" aria-hidden="true"></i> Ihr Warenkorb
            </h1>
            <p class="page-subtitle">Überprüfen Sie Ihre Artikel und schließen Sie Ihre Bestellung ab</p>
        </div>

        <div id="cartContent">
            <!-- Wird dynamisch gefüllt -->
            <button class="checkout-btn" aria-label="Zur Kasse gehen">
                <i class="bi bi-cart-check" aria-hidden="true"></i>
                <span class="checkout-text">Jetzt sicher bezahlen</span>
            </button>
        </div>
    </div>

    <!-- Vorschläge -->
    <div class="container my-5" id="suggestions-container" style="display: none;">
        <div class="row row-cols-1 row-cols-md-2 g-4" id="suggestions-grid">
            <!-- Vorschläge werden hier dynamisch eingefügt -->
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="app.js"></script>
    <script src="cart.js"></script>
    <script src="keyboard-shortcuts.js" defer></script>
    <script src="cart-color-images-only.js"></script>
    
    <script>
        // Aggressives Entfernen aller Farbkreise
        function removeAllColorCircles() {
            // Alle möglichen Selektoren für Farbkreise
            const selectors = [
                '.color-circle',
                '.color-option:not(.cart-color-option)',
                '.color-circle-cart',
                '.cart-color-selector',
                '[style*="border-radius: 50%"]',
                '[style*="background-color"][style*="width: 30px"]',
                '[style*="background-color"][style*="width: 25px"]',
                '[style*="background-color"][style*="width: 24px"]',
                'div[onclick*="selectColor"]',
                'input[type="radio"][name*="color"] + span',
                '.color-options:not(.cart-color-options)',
                '.color-options:not(.cart-color-options) > *'
            ];
            
            selectors.forEach(selector => {
                try {
                    const elements = document.querySelectorAll(selector);
                    elements.forEach(el => {
                        // Prüfe ob es ein kleiner runder Kreis ist
                        const style = window.getComputedStyle(el);
                        const width = parseInt(style.width) || 0;
                        const height = parseInt(style.height) || 0;
                        const borderRadius = style.borderRadius;
                        
                        if ((width <= 50 && height <= 50 && width === height) || 
                            borderRadius.includes('50%') || 
                            el.classList.contains('color-circle') ||
                            el.classList.contains('color-option')) {
                            el.style.display = 'none !important';
                            el.remove(); // Entferne komplett
                        }
                    });
                } catch (e) {
                    // Ignoriere Fehler
                }
            });
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            // Sofort ausführen
            removeAllColorCircles();
            
            // Regelmäßig wiederholen
            setInterval(removeAllColorCircles, 100);
            
            // Bei DOM-Änderungen
            const observer = new MutationObserver(removeAllColorCircles);
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        });
    </script>
</body>
</html>
